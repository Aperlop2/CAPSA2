<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rese√±as de Servicio</title>
    <link rel="stylesheet" href="rese√±as_guardadas.css">
</head>

<body>
    <!-- Encabezado con men√∫ -->
    <header>
        <img src="logocapsa.png" alt="Logo" class="logo">
        <nav class="menu">
            <ul>
                <li class="nav-item"><a class="nav-link" href="index.html">Inicio</a></li>
                <li class="nav-item"><a class="nav-link" href="Quienes somos.html">¬øQui√©nes somos?</a></li>
                <li class="nav-item"><a class="nav-link" href="#sec-9758">Servicios</a></li>
                <li class="nav-item"><a class="nav-link" href="nuestro-personal.html">Nuestro personal</a></li>
                <li class="nav-item"><a class="nav-link" href="convenios.html">Convenios</a></li>
                <li class="nav-item"><a class="nav-link" href="contrato.html">√önete con nosotros</a></li>
                <li class="nav-item"><a class="nav-link" href="rese√±as.html">Rese√±as</a></li>
            </ul>
        </nav>
    </header>
    <div class="container">
        <h1 class="titulo">Rese√±as enviadas</h1>

        <div id="mostrarRese√±as">
            <!-- Aqu√≠ se mostrar√°n todas las rese√±as -->
        </div>

        <!-- Bot√≥n para regresar -->
        <button id="regresarButton" onclick="window.history.back()">Regresar</button>
    </div>

    <script>
        const rese√±as = JSON.parse(localStorage.getItem('rese√±as')) || [];
        const mostrarRese√±as = document.getElementById('mostrarRese√±as');

        const coloresEstrellas = ['#ff4e50', '#ffa726', '#ffd700', '#8bc34a', '#42a5f5'];

        function mostrar() {
            mostrarRese√±as.innerHTML = '';

            if (rese√±as.length > 0) {
                rese√±as.forEach((rese√±a, index) => {
                    const estrellasHTML = Array(5).fill('<span class="estrella">‚òÖ</span>').map((estrella, i) => {
                        return i < rese√±a.calificacion ?
                            `<span class="estrella" style="color: ${coloresEstrellas[i]}">‚òÖ</span>` : estrella;
                    }).join('');

                    const rese√±aHTML = `
                        <div class="rese√±a" id="rese√±a-${index}">
                            <div class="texto-rese√±a">
                                <p><strong>Servicio:</strong> ${rese√±a.servicio}</p>
                                <p><strong>Calificaci√≥n:</strong> ${estrellasHTML}</p>
                                <p><strong>Comentario:</strong> ${rese√±a.comentario}</p>
                            </div>
                            <div class="botones-rese√±a">
                                <button class="editar" onclick="editarRese√±a(${index})">üñâ</button>
                                <button class="borrar" onclick="borrarRese√±a(${index})">üóë</button>
                            </div>
                        </div>
                    `;
                    mostrarRese√±as.innerHTML += rese√±aHTML;
                });
            } else {
                mostrarRese√±as.innerHTML = '<p>No hay rese√±as para mostrar.</p>';
            }
        }

        function editarRese√±a(index) {
            const rese√±a = rese√±as[index];
            const servicio = prompt('Editar servicio:', rese√±a.servicio);
            const calificacion = prompt('Editar calificaci√≥n (1-5):', rese√±a.calificacion);
            const comentario = prompt('Editar comentario:', rese√±a.comentario);

            if (servicio !== null && calificacion !== null && comentario !== null) {
                if (calificacion >= 1 && calificacion <= 5) {
                    rese√±as[index] = {
                        ...rese√±a,
                        servicio,
                        calificacion: parseInt(calificacion),
                        comentario
                    };
                    localStorage.setItem('rese√±as', JSON.stringify(rese√±as));
                    mostrar();
                } else {
                    alert('Por favor ingresa una calificaci√≥n v√°lida (entre 1 y 5).');
                }
            }
        }

        function borrarRese√±a(index) {
            if (confirm('¬øEst√°s seguro de que deseas borrar esta rese√±a?')) {
                rese√±as.splice(index, 1);
                localStorage.setItem('rese√±as', JSON.stringify(rese√±as));
                mostrar();
            }
        }

        mostrar();
    </script>
    <!-- Footer constante -->
    <footer>
        <p>&copy; 2024 CAPSA. Todos los derechos reservados.</p>
    </footer>
</body>

</html>